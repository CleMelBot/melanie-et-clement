<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Mélanie & Clément – Mariage 2025</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>

<style>
:root {
  --green: #1c3b2f;
  --terracotta: #a3471e;
  --cream: #fefdf5;
  --orange: #d26500;
}
* { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
body {
  font-family: 'Poppins', sans-serif;
  background: var(--cream);
  color: var(--green);
  overflow-x: hidden;
}
header {
  position: relative;
  height: 95vh;
  overflow: hidden;
}
.parallax-bg {
  background: url('banner_mobile_recentre.jpg') center/cover no-repeat;
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  z-index: 0;
}
.header-content {
  padding-bottom: 80px;
  position: relative;
  z-index: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: white;
  text-shadow: 2px 2px 5px rgba(0,0,0,0.6);
}
.header-content h1 {
  font-size: 3.8em;
  animation: fadeInDown 2s ease-out;
}
.header-content p {
  font-size: 1.5em;
  margin-top: 0.5em;
  animation: fadeInUp 2s ease-out;
}
@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-30px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
nav {
  background: white;
  position: sticky;
  top: 0;
  z-index: 10;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
nav ul {
  display: flex;
  justify-content: center;
  list-style: none;
  gap: 0.6em;
  padding: 0.6em 0.2em;
  flex-wrap: wrap;
}
nav li a {
  color: var(--green);
  text-decoration: none;
  font-weight: bold;
  font-size: 0.85em;
}
section {
  padding: 4em 1em;
  max-width: 1000px;
  margin: auto;
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.8s ease-out;
}
section.visible {
  opacity: 1;
  transform: translateY(0);
}
h2 {
  font-size: 2.2em;
  margin-bottom: 0.4em;
  text-align: center;
}
.subtitle {
  text-align: center;
  font-style: italic;
  margin-bottom: 2em;
  color: #666;
}
.countdown {
  text-align: center;
  font-size: 1.2em;
  padding: 0.7em;
  color: var(--orange);
  background: var(--cream);
  font-weight: bold;
}
@media (min-width: 768px) {
  .parallax-bg { background-attachment: fixed; }
}
.section-liste-cadeaux, .section-liste-art {
  max-width: 400px;
  margin: 2em 0;
  padding: 0;
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.8s ease-out;
}
.section-liste-cadeaux.visible, .section-liste-art.visible {
  opacity: 1;
  transform: translateY(0);
}
.section-liste-cadeaux h2, .section-liste-art h2 {
  text-align: left;
  font-size: 1.6em;
  margin-bottom: 1em;
}
.section-liste-cadeaux > div, .section-liste-art > div {
  text-align: left;
}
.section-liste-cadeaux h3, .section-liste-art h3 {
  font-size: 1.2em;
  margin-bottom: 0.5em;
  color: var(--green);
}
.section-liste-cadeaux p, .section-liste-art p {
  font-size: 0.95em;
  color: #666;
  margin-bottom: 0.8em;
}
section::before {
  content: "";
  display: block;
  height: 80px;
  margin-top: -80px;
  visibility: hidden;
}
.photo-section {
  display: flex;
  align-items: center;
  gap: 1em;
  margin-bottom: 2em;
}
.photo-section img {
  width: 60px;
  height: 60px;
}
.photo-section p a {
  color: var(--terracotta);
  text-decoration: underline;
}
</style>
</head>
<body>

<header>
<div class="parallax-bg"></div>
<div class="header-content">
<h1>Mélanie & Clément</h1>
<p>Le 28 juin 2025</p>
</div>
</header>

<div class="countdown">Décollage dans <span id="countdown-timer">...</span></div>

<nav>
<ul>
<li><a href="#ceremonie">Cérémonie</a></li>
<li><a href="#reception">Réception</a></li>
<li><a href="#liste">Liste</a></li>
<li><a href="#multimedia">Multimédia</a></li>
<li><a href="#contact">Contact</a></li>
</ul>
</nav>

<section id="ceremonie">
<h2>Cérémonie</h2>
<div class="subtitle">13h45 – Abbaye de Saint-Martin de Boscherville</div>
<p style="text-align:center; max-width: 700px; margin: 2em auto;">Notre cérémonie se déroulera dans l’Abbaye de Saint-Martin de Boscherville. Nous vous attendons à 13h45 pour le début de l’embarquement !</p>
<img alt="Lieu cérémonie" src="lieu_ceremonie.jpg" style="width:100%;border-radius:10px;"/>
<div style="display: flex; justify-content: center; gap: 1em; margin: 1.5em 0;">
  <a href="https://www.google.com/maps?q=Abbaye+de+Saint-Martin+de+Boscherville" target="_blank">
    <img alt="Google Maps" src="maps_logo.png" style="height: 34px;"/>
  </a>
  <a href="https://waze.com/ul?ll=49.44442,0.963771&amp;navigate=yes" target="_blank">
    <img alt="Waze" src="waze_logo.png" style="height: 34px;"/>
  </a>
</div>
</section>

<section id="reception">
<h2>Réception</h2>
<div class="subtitle">17h00 – Abbaye du Valasse</div>
<p style="text-align:center; max-width: 700px; margin: 2em auto;">Après la cérémonie, cap sur l’Abbaye du Valasse à 17h00 pour le rafraîchissement pendant le vol.</p>
<img alt="Lieu réception" src="lieu_reception.jpg" style="width:100%;border-radius:10px;"/>
<div style="display: flex; justify-content: center; gap: 1em; margin: 1.5em 0;">
  <a href="https://www.google.com/maps?q=Abbaye+du+Valasse" target="_blank">
    <img alt="Google Maps" src="maps_logo.png" style="height: 34px;"/>
  </a>
  <a href="https://waze.com/ul?ll=49.537117,0.508053&amp;navigate=yes" target="_blank">
    <img alt="Waze" src="waze_logo.png" style="height: 34px;"/>
  </a>
</div>
</section>

<section id="liste">
<h2>Liste de mariage</h2>
<div class="subtitle">Notre liste</div>
<p style="text-align:center; max-width: 700px; margin: 0 auto 2em;">
Vous souhaitez nous offrir un petit bout de rêve ? Choisissez un cadeau, indiquez le montant de votre participation et laissez-nous un petit mot.<br><strong>Merci de tout cœur !</strong><br>Mélanie & Clément
</p>

<div style="max-width: 400px; margin: 2em auto; text-align: center;">
  <h3 style="margin-bottom: 0.3em;">Faites une contribution libre</h3>
  <p style="color: #555; font-size: 0.95em;">Choisissez vous-même le montant que vous souhaitez offrir</p>
  <div style="display: flex; align-items: center; justify-content: center; gap: 0.5em; margin-top: 1em;">
    <div style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 10px; padding: 0.5em 0.8em;">
      <svg xmlns="http://www.w3.org/2000/svg" style="width: 20px; height: 20px; margin-right: 0.5em; fill: #2d6a4f;" viewBox="0 0 24 24">
        <path d="M20 12v8a2 2 0 0 1-2 2h-4v-10h6zm-8 0v10h-4a2 2 0 0 1-2-2v-8h6zm8-2h-6V6.5a1.5 1.5 0 0 1 3 0V8h1a2 2 0 0 1 2 2zm-8 0H4a2 2 0 0 1 2-2h1V6.5a1.5 1.5 0 0 1 3 0V10z"/>
      </svg>
      <input type="number" id="montantLibre" min="1" placeholder="0" style="padding: 0.4em; font-size: 1em; border: none; outline: none; width: 80px; text-align: right;" />
      <span style="margin-left: 0.5em; font-weight: bold;">€</span>
    </div>
    <a href="#" onclick="envoyerParticipationLibre()" style="background: #2d6a4f; color: white; padding: 0.55em 1.2em; border-radius: 10px; text-decoration: none; font-weight: bold;">Offrir</a>
  </div>
  
  <div style="margin-top: 1.5em; font-size: 0.9em; color: #666;">— Ou choisissez des cadeaux dans la liste —</div>

  <select id="liste-cadeaux" onchange="allerVersCadeau()" style="margin-top: 1em; padding: 0.5em; border-radius: 8px; border: 1px solid #ccc; font-size: 1em; width: 100%;">
    <option value="">Choisissez un cadeau</option>
    <option value="#voyagedenoces">Voyage de noces</option>
    <option value="#equipement">Équipement de cuisine</option>
    <option value="#artdelatable">Art de la table</option>
  </select>
</div>

<hr style="border: none; border-top: 1px solid #ccc; margin: 3em auto; width: 80%;">

<section id="voyagedenoces" class="section-liste-cadeaux">
<h2 class="section-titre-liste">Voyage de Noces</h2>
<div style="width: 100%; max-width: 400px; margin: 2em 0; border: 1px solid #ccc; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); background: #fff;">
  <img src="BALI.JPG" alt="Voyage de noces Bali" style="width: 100%; object-fit: cover; height: auto;">
  <div style="padding: 1.2em; text-align: center;">
    <h3 style="margin: 0 0 0.5em; font-size: 1.2em; color: #1c3b2f;">Faites décoller notre lune de miel</h3>
    <p style="margin: 0.5em 0; color: #666;">En septembre, cap sur Bali ! Faites partie de notre voyage de rêve entre rizières, temples et plages paradisiaques.</p>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSf3kahfR3Zw4YQPU5ZeiN1LC0VFD7rlZp3JzqhpeRbqBDQS7A/viewform?usp=pp_url&entry.1786079912=Voyage+de+Noces"
       target="_blank"
       style="display: inline-block; margin-top: 1em; padding: 0.6em 1.2em; background-color: #2d6a4f; color: white; border-radius: 5px; font-weight: bold; text-decoration: none;">
      Participer
    </a>
  </div>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 3em auto; width: 80%;">

<section id="equipement" class="section-liste-cadeaux">
<h2 class="section-titre-liste">Équipement de Cuisine</h2>
<div style="width: 100%; max-width: 400px; margin: 2em 0; border: 1px solid #ccc; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); background: #fff; text-align: center;">
  <img src="TM7.jpeg" alt="Thermomix TM7" style="width: 100%; height: auto; object-fit: cover;">
  <div style="padding: 1em;">
    <p id="etat-Thermomix" style="margin: 0; font-weight: bold;">0€ / 1 599€</p>
    <p style="margin: 0;">
      <a href="https://www.vorwerk.com/fr/fr/s/shop/thermomix-tm7" target="_blank" style="color: #1c3b2f; text-decoration: underline; font-weight: 600;">Thermomix TM7</a>
    </p>
    <p style="margin: 0.4em 0 1em 0; font-size: 0.9em; color: #666;">Notre futur allié pour concocter de bons petits plats à deux… et pour nos invités !</p>

    <div style="background: #f9f8f4; border-radius: 12px; display: flex; overflow: hidden; height: 55px; margin-top: 1em;">
  <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
    <span style="font-size: 0.75em; font-weight: 600;">Restant</span>
    <span id="restant-Thermomix" style="font-size: 1.1em; font-weight: bold; color: #1c3b2f;">€ 1599€</span>
  </div>
  <button onclick="envoyerProduit(event, 'Thermomix', 'montantProduitThermomix')" style="flex: 1; background: #1c3b2f; color: white; text-align: center; font-weight: bold; font-size: 1em; border: none; cursor: pointer;">
    Participer
  </button>
    </div>
  </div>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 3em auto; width: 80%;">

<section id="artdelatable" class="section-liste-art">
<h2 class="section-titre-liste">Art de la Table</h2>
<div id="produits-art-table" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 2em;">
<!-- Produits injectés en JS ici -->
</div>
</section>

<section id="multimedia">
<h2>Multimédia</h2>
<div class="subtitle">Partagez vos souvenirs, découvrez bientôt les clichés de notre photographe et l’after movie du mariage.</div>

<div class="photo-section">
  <img alt="Logo iCloud" src="icloud_logo.png"/>
  <p>Partagez vos photos pendant l’événement à l’aide du lien <a href="https://www.icloud.com/invites/073ZBjN9-sLKb8_dW3dU_GgRQ" target="_blank">ici</a>.</p>
</div>

<div class="photo-section">
  <img alt="Logo Photographe" src="photographe_logo.png"/>
  <p>Vous retrouverez prochainement ici les photos du photographe du mariage.</p>
</div>

<div class="photo-section">
  <img alt="Logo Vidéaste" src="videaste_logo.PNG"/>
  <p>Vous retrouverez prochainement ici l’after movie du mariage.</p>
</div>
</section>

<section id="contact">
<h2 style="text-align:center;">Contact</h2>

<div style="display: flex; justify-content: center; align-items: center; gap: 4em; margin-top: 3em; flex-wrap: wrap;">
  <div style="display: flex; flex-direction: column; align-items: center; gap: 1em;">
    <a href="tel:+33607029462"><img src="icon_phone.png" alt="Appel Mélanie" width="50"></a>
    <a href="sms:+33607029462"><img src="icon_sms.png" alt="SMS Mélanie" width="50"></a>
    <span>Mélanie</span>
  </div>

  <div style="display: flex; flex-direction: column; align-items: center;">
    <a href="mailto:clemel.bottois@hotmail.com"><img src="icon_mail.png" alt="Mail" width="50" style="margin-bottom: 1em;"></a>
  </div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 1em;">
    <a href="tel:+33645873429"><img src="icon_phone.png" alt="Appel Clément" width="50"></a>
    <a href="sms:+33645873429"><img src="icon_sms.png" alt="SMS Clément" width="50"></a>
    <span>Clément</span>
  </div>
</div>
</section>

<script>
// === Tableau des produits (Thermomix + Art de la table) ===
const produits = [
  { id: "Thermomix", nom: "Thermomix", prix: 1599, image: "TM7.jpeg", lien: "https://www.vorwerk.com/fr/fr/s/shop/thermomix-tm7", description: "Thermomix TM7" },
  { id: 1, nom: "Verre à champagne", prix: 70, image: "1.JPG", lien: "https://www.villeroy-boch.fr/p/newmoon-verre-a-mousseux-et-champagne-1136538130/", description: "Verre à champagne" },
  { id: 2, nom: "Verre à vin rouge", prix: 70, image: "1.JPG", lien: "https://www.villeroy-boch.fr/p/newmoon-verre-a-vin-rouge-1136538110/", description: "Verre à vin rouge" },
  { id: 3, nom: "Verre à vin blanc", prix: 70, image: "1.JPG", lien: "https://www.villeroy-boch.fr/p/newmoon-verre-a-vin-blanc-1136538120/", description: "Verre à vin blanc" },
  { id: 4, nom: "Couverts Piemont", prix: 122, image: "2.jpg", lien: "https://www.villeroy-boch.fr/p/piemont-menagere-couverts-4-pcs-1262649003/", description: "Couverts Piemont" },
  { id: 5, nom: "Mug", prix: 64, image: "3.JPG", lien: "https://www.villeroy-boch.fr/p/afina-mug-avec-anse-1042939651/", description: "Mug" },
  { id: 6, nom: "Sous-tasse à café", prix: 84, image: "4.WEBP", lien: "https://www.villeroy-boch.fr/p/afina-sous-tasse-a-cafe-1042931310/", description: "Sous-tasse à café" },
  { id: 7, nom: "Sous-tasse à expresso", prix: 39, image: "5.WEBP", lien: "https://www.villeroy-boch.fr/p/afina-sous-tasse-a-expresso-1042931430/", description: "Sous-tasse à expresso" },
  { id: 8, nom: "Tasse à expresso", prix: 47, image: "6.JPG", lien: "https://www.villeroy-boch.fr/p/afina-tasse-a-expresso-1042931420/", description: "Tasse à expresso" },
  { id: 9, nom: "Tasse à café", prix: 50, image: "7.JPG", lien: "https://www.villeroy-boch.fr/p/afina-tasse-a-cafe-1042931300/", description: "Tasse à café" },
  { id: 10, nom: "Saladier 2,5l", prix: 34, image: "8.PNG", lien: "https://www.villeroy-boch.fr/p/afina-saladier-1042933160/", description: "Saladier 2,5L" },
  { id: 11, nom: "Bol à céréales", prix: 122, image: "9.PNG", lien: "https://www.villeroy-boch.fr/p/afina-bol-a-cereales-1042931900/", description: "Bol à céréales" },
  { id: 12, nom: "Assiette creuse", prix: 167, image: "10.WEBP", lien: "https://www.villeroy-boch.fr/p/afina-assiette-creuse-1042932703/", description: "Assiette creuse" },
  { id: 13, nom: "Assiette plate", prix: 139, image: "11.WEBP", lien: "https://www.villeroy-boch.fr/p/afina-assiette-plate-1042932620/", description: "Assiette plate" }
];

// === Injection dynamique des produits dans Art de la Table
function afficherProduits() {
  const container = document.getElementById('produits-art-table');
  produits.forEach(produit => {
    if (produit.id === "Thermomix") return; // Thermomix est géré ailleurs

    container.innerHTML += `
      <div style="flex: 0 1 calc(48% - 10px); max-width: 450px; background: #fff; border: 1px solid #ddd; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin: auto; text-align: center;">
        <img src="${produit.image}" alt="${produit.nom}" style="width: 100%; height: 220px; object-fit: cover;">
        <div style="padding: 1em;">
          <p style="margin: 0; font-weight: bold;">0€ / ${produit.prix}€</p>
          <p style="margin: 0;">
            <a href="${produit.lien}" target="_blank" style="color: #1c3b2f; text-decoration: underline; font-weight: 600;">Villeroy & Boch</a>
          </p>
          <p style="margin: 0.4em 0 1em 0; font-size: 0.8em; color: #666;">${produit.description}</p>

          <div style="background: #f9f8f4; border-radius: 12px; display: flex; overflow: hidden; height: 55px;">
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
              <span style="font-size: 0.75em; font-weight: 600;">Restant</span>
              <span id="restant-${produit.id}" style="font-size: 0.95em; font-weight: bold; color: #1c3b2f;">€ ${produit.prix}€</span>
            </div>
            <button onclick="envoyerProduit(event, '${produit.nom}', 'montantProduit${produit.id}')" style="flex: 1; background: #1c3b2f; color: white; text-align: center; font-weight: 600; font-size: 0.85em; border: none; cursor: pointer;">
              Participer
            </button>
          </div>
        </div>
      </div>`;
  });
}
</script>

<script>
// === Fonctionnalités diverses ===

function updateCountdown() {
  const countDate = new Date("June 28, 2025 14:00:00").getTime();
  const now = new Date().getTime();
  const gap = countDate - now;
  const second = 1000, minute = second * 60, hour = minute * 60, day = hour * 24;
  const d = Math.floor(gap / day);
  const h = Math.floor((gap % day) / hour);
  const m = Math.floor((gap % hour) / minute);
  const s = Math.floor((gap % minute) / second);
  document.getElementById("countdown-timer").innerText = `${d}j ${h}h ${m}m ${s}s`;
}

function revealSections() {
  const sections = document.querySelectorAll("section");
  sections.forEach(sec => {
    const top = sec.getBoundingClientRect().top;
    if (top < window.innerHeight * 0.85) sec.classList.add("visible");
  });
}

function allerVersCadeau() {
  const choix = document.getElementById("liste-cadeaux").value;
  if (choix) location.href = choix;
}

function encoderPourGoogle(value) {
  return encodeURIComponent(value).replace(/%20/g, '+');
}

function envoyerParticipationLibre() {
  const montantInput = document.getElementById('montantLibre');
  if (!montantInput || montantInput.value.trim() === "" || parseInt(montantInput.value) <= 0) {
    montantInput.focus();
    montantInput.setCustomValidity("Remplissez le champ");
    montantInput.reportValidity();
    return;
  } else {
    montantInput.setCustomValidity("");
  }
  const montant = montantInput.value;
  const url = "https://docs.google.com/forms/d/e/1FAIpQLSf3kahfR3Zw4YQPU5ZeiN1LC0VFD7rlZp3JzqhpeRbqBDQS7A/viewform"
            + "?entry.1061348133=" + encoderPourGoogle(montant)
            + "&entry.1786079912=Participation+libre";
  window.open(url, '_blank');
}

function envoyerProduit(event, nomProduit, idInput) {
  event.preventDefault();
  const montantInput = document.getElementById(idInput);
  if (!montantInput || montantInput.value.trim() === "" || parseInt(montantInput.value) <= 0) {
    montantInput.focus();
    montantInput.setCustomValidity("Remplissez le champ");
    montantInput.reportValidity();
    return;
  } else {
    montantInput.setCustomValidity("");
  }
  const montant = montantInput.value;
  const url = "https://docs.google.com/forms/d/e/1FAIpQLSf3kahfR3Zw4YQPU5ZeiN1LC0VFD7rlZp3JzqhpeRbqBDQS7A/viewform"
            + "?entry.1061348133=" + encoderPourGoogle(montant)
            + "&entry.1786079912=" + encoderPourGoogle(nomProduit);
  window.open(url, '_blank');
}

async function chargerParticipations() {
  try {
    const response = await fetch('https://docs.google.com/spreadsheets/d/11Vr2arhPApQe78LkvDICM6nHzyGbTjhihqfaRFhzHJI/gviz/tq?tqx=out:json');
    const text = await response.text();
    const json = JSON.parse(text.substring(47).slice(0, -2)); // Nettoyage spécifique à gviz
    const rows = json.table.rows;

    const participations = {};

    rows.forEach(row => {
  const nomProduit = row.c[1]?.v; // Cadeau choisi
  const montant = parseInt(row.c[2]?.v || 0); // Montant donné
  if (nomProduit) {
    participations[nomProduit] = (participations[nomProduit] || 0) + montant;
  }
});

    produits.forEach(produit => {
      if (produit.id === "Thermomix") {
        const montantRecu = participations["Thermomix"] || 0;
        const restant = Math.max(0, produit.prix - montantRecu);
        document.getElementById('etat-Thermomix').innerText = `${montantRecu}€ / ${produit.prix}€`;
        const input = document.getElementById('montantProduitThermomix');
        if (input) input.placeholder = restant;
      } else {
        const montantRecu = participations[produit.nom] || 0;
        const restant = Math.max(0, produit.prix - montantRecu);
        const input = document.getElementById('montantProduit' + produit.id);
        if (input) input.placeholder = restant;
        const container = input?.parentElement?.parentElement?.parentElement;
        if (container) {
          const affichage = container.querySelector('p');
          if (affichage) affichage.innerText = `${montantRecu}€ / ${produit.prix}€`;
        }
      }
    });

  } catch (error) {
    console.error('Erreur de chargement du JSON:', error);
  }
}

window.onload = () => {
  updateCountdown();
  setInterval(updateCountdown, 1000);
  afficherProduits();
  revealSections();
  window.addEventListener("scroll", revealSections);
  if (window.location.hash) {
    history.replaceState(null, "", window.location.pathname);
    window.scrollTo(0, 0);
  }
  chargerParticipations();
};
</script>
</body>
</html>
